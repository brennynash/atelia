<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Initialize Atelia Built Database</title>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 40px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        h1 {
            color: #3A3A3A;
            margin-bottom: 20px;
        }
        .btn {
            background: #3A3A3A;
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 0;
            display: block;
            width: 100%;
        }
        .btn:hover {
            background: #2A2A2A;
        }
        .btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        .status {
            padding: 15px;
            border-radius: 4px;
            margin: 10px 0;
        }
        .success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        .log {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 4px;
            margin: 10px 0;
            max-height: 300px;
            overflow-y: auto;
            font-family: monospace;
            font-size: 12px;
        }
        .log-item {
            margin: 5px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üöÄ Initialize Atelia Built Database</h1>
        
        <div class="info status">
            <strong>‚ÑπÔ∏è Important:</strong> This will populate your Firestore database with the current content from your landing page. Only run this once after setting up Firebase.
        </div>

        <div id="authStatus" class="status" style="display: none;"></div>
        
        <div id="loginSection">
            <h3>Step 1: Login with Admin Account</h3>
            <input type="email" id="email" placeholder="admin@ateliabuilt.com" value="admin@ateliabuilt.com" style="width: 100%; padding: 10px; margin: 10px 0; border: 1px solid #ddd; border-radius: 4px;">
            <input type="password" id="password" placeholder="Password" style="width: 100%; padding: 10px; margin: 10px 0; border: 1px solid #ddd; border-radius: 4px;">
            <button id="loginBtn" class="btn">Login</button>
        </div>

        <div id="initSection" style="display: none;">
            <h3>Step 2: Initialize Database</h3>
            <button id="initBtn" class="btn">Initialize Database with Default Content</button>
        </div>

        <div id="logContainer" style="display: none;">
            <h3>Progress Log:</h3>
            <div id="log" class="log"></div>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-app.js";
        import { getAuth, signInWithEmailAndPassword, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-auth.js";
        import { getFirestore, doc, setDoc, addDoc, collection } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyDl_lGXfhPrgB5MtFAfOwkDp1ralQw6Flc",
            authDomain: "atelia-a0e81.firebaseapp.com",
            projectId: "atelia-a0e81",
            storageBucket: "atelia-a0e81.firebasestorage.app",
            messagingSenderId: "364749141331",
            appId: "1:364749141331:web:547dcb0e8592413cd01da6",
            measurementId: "G-086T2JDMSC"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        let currentUser = null;

        // Auth state observer
        onAuthStateChanged(auth, (user) => {
            if (user) {
                currentUser = user;
                document.getElementById('loginSection').style.display = 'none';
                document.getElementById('initSection').style.display = 'block';
                showStatus('authStatus', `‚úÖ Logged in as ${user.email}`, 'success');
            } else {
                document.getElementById('loginSection').style.display = 'block';
                document.getElementById('initSection').style.display = 'none';
            }
        });

        // Login
        document.getElementById('loginBtn').addEventListener('click', async () => {
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            
            try {
                await signInWithEmailAndPassword(auth, email, password);
            } catch (error) {
                showStatus('authStatus', `‚ùå Login failed: ${error.message}`, 'error');
            }
        });

        // Initialize Database
        document.getElementById('initBtn').addEventListener('click', async () => {
            if (!currentUser) {
                alert('Please login first');
                return;
            }

            const btn = document.getElementById('initBtn');
            btn.disabled = true;
            btn.textContent = 'Initializing...';

            document.getElementById('logContainer').style.display = 'block';
            clearLog();

            try {
                await initializeDatabase();
                showStatus('authStatus', '‚úÖ Database initialized successfully!', 'success');
                btn.textContent = 'Database Initialized ‚úì';
            } catch (error) {
                showStatus('authStatus', `‚ùå Error: ${error.message}`, 'error');
                btn.disabled = false;
                btn.textContent = 'Retry Initialization';
            }
        });

        async function initializeDatabase() {
            // Hero Section
            log('üìù Creating Hero Section...');
            await setDoc(doc(db, 'content', 'hero'), {
                headline: 'Dedicated to translating exceptional design into exceptional construction.',
                buttonText: 'BOOK A DISCOVERY CALL'
            });
            log('‚úÖ Hero Section created');

            // Projects Section
            log('üìù Creating Projects Section...');
            await setDoc(doc(db, 'content', 'projects'), {
                title: 'Projects.',
                description: 'A trusted luxury home builder dedicated to turning thoughtful designs into enduring, tangible homes',
                cta: 'View all our projects ‚Üí'
            });

            const projects = [
                { name: 'Preston', image: 'https://images.unsplash.com/photo-1586023492125-27b2c045efd7?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80', alt: 'Preston project' },
                { name: 'Southbank', image: 'https://images.unsplash.com/photo-1556909114-f6e7ad7d3136?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80', alt: 'Southbank project' },
                { name: 'Hawthorn', image: 'https://images.unsplash.com/photo-1564013799919-ab600027ffc6?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80', alt: 'Hawthorn project' },
                { name: 'Donvale 82', image: 'https://images.unsplash.com/photo-1584622650111-993a426fbf0a?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80', alt: 'Donvale 82 project' }
            ];

            for (const project of projects) {
                await addDoc(collection(db, 'projects'), project);
                log(`‚úÖ Project added: ${project.name}`);
            }

            // Testimonials Section
            log('üìù Creating Testimonials Section...');
            await setDoc(doc(db, 'content', 'testimonials'), {
                enabled: true,
                title: 'Daniel + Wonitta | Construct.',
                description: 'Hear from our wonderful clients, Daniel and Wonitta, as they share their experience working with Atelia on their contemporary renovation of their home at Donvale 82. In this testimonial, Daniel and Wonitta walk us through the journey of transforming their living space to an open-concept design, a luxurious new bathroom, and a stylish outdoor area. They discuss how Atelia brought their vision to life, focusing on both functionality and modern design.',
                cta: 'View all our testimonials ‚Üí',
                videoUrl: 'https://www.youtube.com/watch?v=dQw4w9WgXcQ',
                embedUrl: 'https://www.youtube.com/embed/dQw4w9WgXcQ',
                videoTitle: 'Atelia Built | Donvale 82 - Project Testimonial'
            });
            log('‚úÖ Testimonials Section created');

            // About Section
            log('üìù Creating About Section...');
            await setDoc(doc(db, 'content', 'about'), {
                title: 'About Atelia Built',
                description1: 'Atelia Built is a luxury home builder dedicated to translating exceptional design into exceptional construction. With a focus on craftsmanship, collaboration, and clarity, we bring every design vision to life with care and precision.',
                description2: 'We believe a beautifully designed home deserves to be beautifully built. While we may not create the initial vision, we are the ones who bring it to life. Our work begins where design meets reality ‚Äî in the details, the materials, the craftsmanship, and the execution. We collaborate closely with homeowners, architects, and designers to ensure that every vision is honored, every plan is realized, and every expectation is exceeded.',
                cta: 'Learn more about us ‚Üí'
            });
            log('‚úÖ About Section created');

            // Services Section
            log('üìù Creating Services Section...');
            await setDoc(doc(db, 'content', 'services'), {
                title: 'Services.',
                tagline: 'Creating peace of mind.',
                cta: 'Explore all our services'
            });

            const services = [
                { name: 'Site preparation', image: 'https://images.unsplash.com/photo-1556909114-f6e7ad7d3136?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80', alt: 'Site preparation' },
                { name: 'Final finishes', image: 'https://images.unsplash.com/photo-1564013799919-ab600027ffc6?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80', alt: 'Final finishes' },
                { name: 'Custom Renovation', image: 'https://images.unsplash.com/photo-1584622650111-993a426fbf0a?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80', alt: 'Custom Renovation' }
            ];

            for (const service of services) {
                await addDoc(collection(db, 'services'), service);
                log(`‚úÖ Service added: ${service.name}`);
            }

            // News Section
            log('üìù Creating News Section...');
            await setDoc(doc(db, 'content', 'news'), {
                title: 'Dream Homes Revealed.',
                tagline: "We're excited to share that Atelia was featured on Channel 9's Dream Homes Revealed ‚Äì Season 4, Episode 12 \"Tranquil Oasis\".",
                cta: 'Watch the full episode'
            });

            const newsItems = [
                { date: 'Channel 9 Feature', title: 'Warrandyte North 54 - Tranquil Oasis', image: 'https://images.unsplash.com/photo-1586023492125-27b2c045efd7?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80', alt: 'Warrandyte North 54', linkText: 'Watch the full episode' },
                { date: 'Season 4, Episode 12', title: 'Dream Homes Revealed - Tranquil Oasis', image: 'https://images.unsplash.com/photo-1556909114-f6e7ad7d3136?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80', alt: 'Dream Homes Revealed', linkText: 'Learn more' },
                { date: 'Behind the Scenes', title: 'Directors Share Expert Insights', image: 'https://images.unsplash.com/photo-1564013799919-ab600027ffc6?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80', alt: 'Behind the Scenes', linkText: 'Learn more' },
                { date: 'Featured Project', title: 'Craftsmanship, Detail, and Creating Spaces', image: 'https://images.unsplash.com/photo-1584622650111-993a426fbf0a?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80', alt: 'Craftsmanship', linkText: 'Learn more' }
            ];

            for (const news of newsItems) {
                await addDoc(collection(db, 'news'), news);
                log(`‚úÖ News added: ${news.title}`);
            }

            // CTA Section
            log('üìù Creating CTA Section...');
            await setDoc(doc(db, 'content', 'cta'), {
                headline: 'Ready to bring your dream home to life with personalized design and exceptional craftsmanship?',
                description: "We've helped clients [like you] to design and build the home you have always imagined.",
                buttonText: 'Book a Discovery Call'
            });
            log('‚úÖ CTA Section created');

            // Site Settings
            log('‚öôÔ∏è Creating Site Settings...');
            await setDoc(doc(db, 'content', 'settings'), {
                siteName: 'Atelia Built',
                siteTagline: 'Exceptional Home Construction',
                siteFavicon: '',
                siteLogo: '',
                seoTitle: 'Atelia Built - Exceptional Home Construction',
                seoDescription: 'Luxury home builder dedicated to translating exceptional design into exceptional construction. Custom homes, renovations, and premium building services in North Dakota.',
                seoKeywords: 'home builder, custom homes, luxury construction, home renovation, residential building, custom home design, North Dakota builder',
                contactPhone: '0483 930 343',
                contactEmail: 'info@ateliabuilt.com',
                contactAddress: '1411 Chili Ave, Rochester North Dakota, United States',
                socialInstagram: 'https://instagram.com/ateliabuilt',
                socialLinkedIn: 'https://linkedin.com/company/ateliabuilt',
                socialFacebook: 'https://facebook.com/ateliabuilt',
                socialTwitter: 'https://twitter.com/ateliabuilt',
                hoursWeekday: 'Monday - Friday: 09.00 - 23.00',
                hoursWeekend: 'Sunday: 09.00 - 16.00'
            });
            log('‚úÖ Site Settings created');

            log('üéâ Database initialization complete!');
        }

        function log(message) {
            const logEl = document.getElementById('log');
            const item = document.createElement('div');
            item.className = 'log-item';
            item.textContent = `${new Date().toLocaleTimeString()} - ${message}`;
            logEl.appendChild(item);
            logEl.scrollTop = logEl.scrollHeight;
        }

        function clearLog() {
            document.getElementById('log').innerHTML = '';
        }

        function showStatus(id, message, type) {
            const el = document.getElementById(id);
            el.textContent = message;
            el.className = `status ${type}`;
            el.style.display = 'block';
        }
    </script>
</body>
</html>

